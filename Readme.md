# luaByCMake
基于lua最新5.4.6版本创建的luaCMake项目，可直接编译出lua、luac、动态库与静态库。

要自己尝试构建过程可以参考lua源码中的Makefile文件，其中除了lua.c和luac.c外的源文件用于产生动态库和静态库，lua.c链接静态库产生lua二进制文件，luac.c链接静态库产生luac二进制文件。

# 最近的更新

## 2024.2.14

春节回家之后好懒好懒，一直在看僵约，直到前两天晚上才想起来我春节回来是要适配MacOS的编译的，但是cmake配置看起来还是不太顺眼，就比如说所有的子模块的common其实都是同一个common，其中会指定子模块链接lua动态库和安装的路径，所以，这部分内容应该所有子模块都一样的，所以就抽出来改了个名字而已，然后原来子模块中重复的common就删除了；

主模块的改动比较大，原先我是把不同平台的配置几乎全部分离开，但是后面我发现，不同配置实际上区别是一些link的flags和宏定义，像编译生成的目标文件名称和前缀之类的属性其实不应该在单独的配置中设置，把这些配置写到同一个地方，根据不同的平台去实现，这样看起来清晰一点；

目前改完之后MinGW、GNU和AppleClang是正常编译和安装了，但是MSVC又出问题了（哭笑不得）

## 2024.1.8

原先的CMakeLists实在过于臃肿，经过了几个月的工作吧，也悟到了一些经验，遂重新把根项目的CMakeLists重写了，将不同编译器的配置写成.cmake文件，在CMakeLists中导入，一些通用的配置就写到base.cmake和common.cmake中，另外也提供了交叉编译的支持。

目前在Linux、Windows上编译成功，交叉编译也成功，MacOS还是只能等回家过年装虚拟机试试。

## 2023.10~11

实现了Windows下的efw模块，为Windows下的lua提供了utf-8支持。